# 第一章 数字图像
## 2 图像获取
## 2.1 针孔相机模型
假设一个可见目标位于与针孔水平距离为Z,与光轴垂直距离为Y的位置,他的投影高度y取决于两个参数
照相机盒子的固定深度 f 和 坐标系原点与目标之间的距离 Z
y = -(f/Z) * Y
x = -(f/Z) * X

### 2.3 数字化
1. 空间采样

   传感器单元的几何特征直接决定了对连续像的空间采样.在最简单的情况下,一个平面上的传感器单元排列在均匀的空间网格上,每一个单元测量落在其上的光线数量.

2. 时域采样

   时域采样是在通过在均匀的事件间隔上测量每个独立传感器单元上的光入量来完成的.数码相机的CCD或CMOS闯关拿起通过感应连续光束,触发充电过程,然后计算曝光时间内所接受的电荷数量来完成采样

3. 量化像素值

   模数转换器

4. 把图像看作离散函数

   二维有序整数矩阵

### 2.4 图像尺寸与分辨率
一幅图像的分辨率指定了它在真实世界种的空间尺寸,又每个计量单位的图像元素数给出,
例如,印刷产品中使用的 点每英寸(dots per inch,dpi) 或者 线每英寸(line per inch,lpi)
又如,卫星图像中的像素每千米

1 foot 英尺 = 12 inches 英寸= 30.48 cm(厘米)=0.3048 m(米)
1 inch 英寸 = 25.4 mm 毫米

###2.6 像素值
像素实际上时长度为k的二进制字,因此一个像素可以表示2^k种不同的值.k值又图像的位深度(或深度)决定
通常时处理器的字长
一个单独像素的位数取决于图像的种类,例如,二值图像,灰度图像或RGB图像.

位 : 单个bit


### 2.6 像素值

一个像素通常可以表示 2^k^ 种不同的值.k值由图像的位深度(或深度) 决定.

==位深度是指用于表示单个颜色的位数,不是表示整个像素所需的位数==

一个单独像素的位数取决于图像的终类,例如,二值图像,灰度图像,RGB彩色图像



## 3 图像文件格式

### 3.3 gif 文件格式

gif 实质上是一种索引图像文件格式,,是为最大升读是8位的彩色和灰度图像而设计的,因此它还不支持真彩色图像.

它对包含2~256 的调色板,使得像素可以使用更少的位数进行编码

gif 文件格式是针对包含大面积相同颜色的"单调"图像或图标图像的有效编码而设计的.它采用无损颜色量化和无损LZW压缩算法对具有相同颜色的大面积区域进行搞笑编码.

### 3.4 png 文件格式

它支持三种不同的图像类型

* 真彩色图像
* 灰度图像
* 索引图像

另外png包含一个最大宽度位16位的用于透明处理的Alpna通道.

PNG 通过一种PKZIP方法的变体来支持无损压缩,但不支持有损压缩

目前,PNG是在互联网撒谎给你用于表示未压缩的,无损的,真彩色图像的最佳悬着

### 3.5 gpeg 文件格式

压缩方法

### 3.6 BMP 文件格式

BMP 是一种支持灰度图像,缩影图像和正彩色图像的文件格式,它在Windows种被广泛使用.BMP同时还支持二值图像,由于其每个像素都用一整个字节来储存,所以这种方式并不搞笑.这种格式可以支持简单无损的,基于又称长度的压缩方法.

### 3.7 PBM 文件格式

PBM(简易位图格式)的成员

第一行的P2 表示图像时一个村粗位人类刻度格式的PGM文件;第二行说明如何通过以"#"号开头,直接在文本中插入注释,

第三行各厅处了图像的唯独,17 7 表示为 宽17 高为 7

第四行定义了图像种的最大像素值.其余行表示实际像素值.

PBM 二值图像

PGM 灰度图

PNM 彩色图像



# 第三章 直方图

## 3.1 何为直方图

直方图时一种频率分布图,它描述了不同强度值在图像种出现的频率.

## 3.2 理解直方图

对比度范围,是直方图取值范围(最大,最小值)

### 3.2.1 图像获取

曝光:一端较大强度取值范围未使用而另一端充满峰值的直方图就代表图像曝光不适合.

对比度:一方面是指一幅给定图像中强度值的有效利用范围,另一方面是值图像种最大和最小像素强度的差距.

动态范围:指图像种不同像素灰度值的数目.

### 3.2.2 图像缺陷

饱和度

峰值和间隙

图像压缩的影响

## 3.3 直方图的计算

## 3.4 多余 8 位图像的直方图

### 3.4.1 像素组合

装箱计算

第j个箱的区域的起始值为

a~j~ = j * K/B 

B为箱子的个数

## 3.5 彩色图像直方图

强度直方图

单个颜色通道直方图

组合颜色通道直方图

## 3.6 累积直方图





# 第四章 点运算

点运算是在不改变图像大小,几何形状以及局部结构的情况下,对像素值进行修改.

## 4.1 图像强度调整

### 4.1.1 对比度和亮度

增加图像50%的对比度:

f~contr~(a) = a * 1.5



提高10个单位的亮度:

f~bright~(a) = a + 10

### 4.1.2 利用设定门限限制结果值



### 4.1.3 图像求反

对于一个在取值范围[0,a~max~]内的像素值 a = I(u,v),相应的点运算位:

f~invert~(a) = -a + a~max~ = a~max~ - a

### 4.1.4 阈值操作

f~threshold~(a) = 

a0 if a < a~th~

a1 if a>= a~th~



## 4.2 点运算与直方图

## 4.3 自动对比度算法

自动对比度调整是一种点运算,其作用是改变像素值使得结果覆盖像素值的全部取值范围.

自动对比度操作的映射函数可以定义为:

f~ac~(a) = a~min~ + (a - a~low~) * (a~max~-a~min~)/(a~high~-a~low~)



## 4.4 修正的自动对比度调整

这个问题在很大程度上可以通过在目标灰度范围的上限和下限区域"充满"固定百分比(q~low~,q~hight~)的像素得以避免.为了到达此目的,要确定两个限定值 a~low~ 和 a~high~ .

值 a~low~ 和 a~high~ 依赖于图像的内容,可以通过图像的累计直方图H(i) 求得

a~low~ = min{i | H(i) >= M * N * q~low~}

a~high~ = max{i | H(i) <= M * N * (1- q~high~ )}

其中0<=q~low~ , q~high~<=1 , q~low~  + q~high~  <= 1 ,M * N 是图像中的像素数,

所有在像素值a~low~ 和 a~high~以外的值,分别映射到机制a~min~ 和 a~max~,

中间值线性映射到去接[a~min~ ,a~max~].

## 4.5 直方图的均衡化

f~eq~(a) = (H(a)/(M * N)) *(K-1)



修正的累计直方图形式

H(i) = $\sum_{j=0}^{i} \sqrt{h(j)}$





## 4.6 直方图规范化

用于修正一幅图像使其直方图于任意强度分布相匹配,包括一幅给定图像的直方图.

### 4.6.1 频率与概率

$P(i) = \frac{h(i)}{M N}$

$P(i) = \sum_{j=0}^{i}p(j) ,0<= i < K$



### 4.6.2 直方图规范化原理

直方图规范化的目的是为了通过点运算修正一幅给定图像I~a~ ,使得分布函数P~A~尽可能的匹配参考分布P~p~.



通过两个分布P~R~ 和 P~A~ 相结合,可以得到所需的映射f~hs~ . 对于原始图像中的一个给定的像素值a,可以求得新的像素值a^'^ 为

$a^{'} = P_R^{-1}(P_A(a))$

这里假设$P_R(i)$ 是 可逆的

### 4.6.3 调整为分段线性分布

定点

插值

### 4.6.4 调整为给定直方图

## 4.7 Gamma 校正

其额定Gamma值为y~c~ ,意味着输出信号S与入射的光能量L的关系为:

$S = L^y$



为了补偿而定Gamma值为y~c~ 的照相机产生的输出信号S,使用以y~cc~ = 1/y~c~ 的Gamma 校正.修正后信号S' 与接收光强L是成比例关系的.

# 第五章 滤波器

## 5.1 何谓滤波器

滤波器与点运算的主要区别在于:滤波器一般会用到原图像中的多个像素来计算每个新像素的值.



## 5.2 线性滤波

线性滤波之所以得名,是因为这种滤波器是将支撑区域内的像素值以线性方式结合起来的,即==加权求和==.

### 5.2.1 滤波矩阵

滤波函数是可以无限延申的,这是将矩阵H定义的区域外部分都当作0

### 5.2.2 应用滤波器
### 5.2.3 计算滤波器算子

在整个操作结束前,原像素是不能被修改的.

### 5.2.4
### 5.2.5 整数系数

尺度因子 s 通常是所有系数和的倒数.

### 5.2.6 任意尺寸的滤波器

K <= u' <= (M-K-1)

...

### 5.2.7 线性滤波器的类型
#### 5.2.7.1 平滑滤波器
#### 5.2.7.2 1. 箱式滤波器.

箱式滤波器式所有平滑滤波器中最简单的,其3d形状像一个箱子

如:

1 1 1

1 1 1

1 1 1

当然最后要平均下.

#### 5.2.7.3 2. 高斯滤波其

一个各向同性的滤波器.(每个方向上统一)

3 5 3

5 9 5

3 5 3

#### 5.2.7.4 差分滤波器

如果有一些滤波系数式负值,那么滤波结果可以看作式两部分和之差

举例来说就是拉普拉斯滤波

-1 -2 -1

-2 16 -2

-1 -2 -1

## 5.3 线性滤波的性质

### 5.3.1 线性卷积

### 5.3.2 线性卷积的性质

1. 可交换 : 线性卷积是可交换的
2. 线性 : (s* I ) * H = I * (s * H) = s * (I * H)
3. 结合性 : 运算顺序不影响最终结果

### 5.3.3 线性滤波的可分离性

H~xy~ = H~x~ * H~y~

??

### 5.3.4 滤波器的脉冲响应

脉冲函数或者狄拉克函数 o() 就是一个卷积不变函数

I * o() = I



如果某个滤波器H将脉冲函数 o 作为输入, 会有什么结果呢?

卷积运算的结果就是滤波函数H本身



## 5.4 非线性滤波

线性滤波存在一个很重要的缺陷 : 所有的图像结构都被模糊了,因此整个图像的质量显著下降.

### 5.4.1 最小值与最大值滤波
### 5.4.2 中值滤波

排序 中间值

### 5.4.3 加权中值滤波器

权值可以理解为对应像素值的 "投票数"

## 5.5 滤波器的实现
### 5.5.1 滤波器的效率
### 5.5.2 图像的边界处理

赋值



扩展

# 第六章 边缘与轮廓

## 6.1 边缘是怎么来的

边缘可以粗略的描述维图像中那些沿某一特定方向局部强度变化显著的位置.

局部强度变换越强烈,越能证明着一位置存在边缘.

## 6.2 基于梯度的边缘检测

在这种情况下,图像中一行的灰度图像变换解剖面图可以看作是一个一维的函数

计算其一阶导数,在局部灰度上升的区域结果为正值,而在灰度下降的区域结果为负值.



对一个离散函数 f(u) , 粗略估计点u处切线斜率的一个简单方法是,过最近邻的两点做一条直线,并通过着两点的函数值 f(u-1) ,  f(u+1) 来估计这条直线的斜率.

同样的方法当然也适用于垂直方向上的导数,也就是沿图像中列的方向.

### 6.2.1 偏导数与梯度

多维函数沿某一坐标轴的单数称为偏导数

梯度向量

图像函数的偏导数

偏导数向量(二维)

### 6.2.2 导数滤波器

导数矩阵 [-0.5,0,0.5]

## 6.3 边缘检测算子
### 6.3.1 Prewitt 算子与 Sobel 算子

#### Prewitt 算子

-1 , 0 , 1

-1 , 0 , 1

-1 , 0 , 1

和

-1, -1 , -1

0, 0 , 0

1 , 1 , 1



=

1

1  * [-1,0,1]

1

..



#### Sobel算子

-1 0 1

-2 0 2

-1 0 1

与

-1 -2 -1

0 0 0 

1 2 1

### 6.3.2 Roberts 算子

0 1

-1 0

与

-1 0 

0 1

### 6.3.3 罗盘算子

-1  0  1

-2   0  2

-1  0   1



-2  -1  0

-1  0  1

0  1  2

---



-5  3  3

-5  0  3

-5  3  3



-5  -5  3

-5  0  3

3  3  3



## 6.4 其他边缘检测算子
### 6.4.1 基于二阶导数的边缘检测

由于二阶导数通常会放大图像噪声,因此需要使用合适的低通滤波器做预平滑处理.

### 6.4.2 不同尺度下的边缘

分层或金字塔技术

### 6.4.3 Canny 算子
### 6.4.4
### 6.4.5
## 6.5 从边缘到轮廓
### 6.5.1 轮廓跟踪
### 6.5.2 边缘图
### 6.5.3
### 6.5.4
### 6.5.5
## 6.6 边缘锐化
### 6.6.1 边缘锐化与拉普拉斯算滤波器

函数的锐化可以通过从原图像函数f(x)中减去二阶导数f''(x)的一部分得到



#### 拉普拉斯算子

(1,-2,1) + [1,-2 ,1]

= 

0 1 0

1 -4 1

0 1 0 



0 0  0

1 -2 1

0 0 0 

+

0 1 0

0 -2 0

0 1 0



#### 锐化

为了执行实际的锐化处理,休闲对图像I进行拉普拉斯滤波,然后从原图像中减掉滤波结果中的一部分.

正如对二阶导数的语气,拉普拉斯滤波器对噪声相当敏感,它可以通过采用预平滑措施,来减弱噪声的影响.

### 6.6.2 USM 锐化

#### 处理过程

USM滤波器的第一步是从原视图像中减去一个其平滑后的副本,这一结果称为"掩膜"

然后,将次掩膜重新覆盖到原图像上,这样图像中的边缘就能得到锐化.

#### 平滑滤波器

高斯滤波最常见

#### 扩展

USM滤波器相对拉普拉斯滤波器而言,其又是在于它降低了对噪声的敏感度.



额外阈值参数t??

#### 实现

#### 拉普拉斯于USM滤波器

拉普拉斯是USM的一个特例                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

# 第七章 形态学滤波

## 7.1 收缩于放大

中值滤波

### 7.1.1 像素的邻域

四邻域

八邻域



## 7.2 基本的形态学运算
### 7.2.1 结构元素

域线性滤波器的系数矩阵类似,形态学滤波器的性能有称为"结构元素"的矩阵中的元素决定.

### 7.2.2 点集

所有前景像素的坐标

### 7.2.3 膨胀

I .+ H = {(p+q)|p 属于I,Q 属于H}

I= {(1,1),(2,1),(2,2)}

H= {(0,0),(1,0)}

I.+ H= 

{

(1,1)+(0,0),(1,1)+(1,0),

(2,1)+(0,0),(2,1)+(1,0),

(2,2)+(0,0),(2,2)+(1,0),

}

### 7.2.4 腐蚀

I - H = {p 属于Z^2^ | H~p~  属于 I}

I= {(1,1),(2,1),(2,2)}

H= {(0,0),(1,0)}

(1,1)+(0,0) = (1,1)

(1,1)+(1,0) = (2,1)

将结构元素H放在某位置P上,如果这时H完全包含在前景像素中(即 Hp 是 I 的子集),那么P就包含在I-H的结果中.

### 7.2.5 膨胀与腐蚀的性质

膨胀运算可以交换

腐蚀运算不可交换



膨胀与腐蚀相结合是,类似于算术减法于加法,满足如下链式法则.

(I1-I2)-I3 = I1-I2+I3



膨胀与腐蚀是对偶的.

### 7.2.6 设计形态学滤波器
### 7.2.7 应用举例:轮廓

腐蚀,求反,交运算

## 7.3 复合运算
### 7.3.1 开运算

去除小结构

向腐蚀后膨胀

### 7.3.2 闭运算

填补孔洞和缝隙

先膨胀,后腐蚀

### 7.3.3
### 7.3.4
### 7.3.5
### 7.3.6
### 7.3.7
## 7.4 形态学滤波
### 7.4.1 结构元素

0值对结果有共享,不可省略

### 7.4.2 (灰度)膨胀与腐蚀

灰度膨胀定义为H中的值与I的当前子图中的值之和的最大值.

类似的,灰度腐蚀是==之差的最小值==.



### 7.4.3 灰度开运算与闭运算

幂等性

平移不变性



# 第八章 彩色图像

## 8.1 RGB 彩色图像

在这个颜色空间中,无法确定一个RGB像素对应于现实世界中的哪一种颜色..

### 8.1.1 彩色图像的组织结构

* 真彩色图像
  * 分量排列
  * 打包排列
* 索引图像



## 8.2 颜色空间和颜色转换
### 8.2.1 转换为灰度图像

将一幅RGB彩色图像转换为灰度图像,是通过计算每一个RGB像素的等效灰度或者亮度值Y来进行的.在最简单的情况下,Y可以取为R,G,B 三分量的平均值

实际上,由于红色和黄色看起来比蓝色亮,这就会导致图像的红,黄区域比较暗,二蓝色区域比较亮.因此我们应用颜色分量的加权和来计算等效的亮度值.

wr : 0.299

wg : 0.587

wb : 0.114



当每一个像素RGB分量都相等时,这副RGB图像时无色调的,或者说时黑色的.



### 8.2.2 彩色图像的去饱和

去饱和就是在RGB图像种以连续的方式统一削减颜色量.

### 8.2.3
### 8.2.4
### 8.2.5
### 8.2.6
### 8.2.7
## 8.3 彩色图像的统计分析
### 8.3.1
### 8.3.2
### 8.3.3
### 8.3.4
### 8.3.5
### 8.3.6
### 8.3.7
## 8.4
### 8.4.1
### 8.4.2
### 8.4.3
### 8.4.4
### 8.4.5
### 8.4.6
### 8.4.7
## 8.5
### 8.5.1
### 8.5.2
### 8.5.3
### 8.5.4
### 8.5.5
### 8.5.6
### 8.5.7
## 8.6
### 8.6.1
### 8.6.2
### 8.6.3
### 8.6.4
### 8.6.5
### 8.6.6
### 8.6.7
## 8.7
### 8.7.1
### 8.7.2
### 8.7.3
### 8.7.4
### 8.7.5
### 8.7.6
### 8.7.7

# 复习重点 
- [x] 位深度

- [x] 真彩色
- [x] 时域采样
- [x] 针孔模型
- [x] 图级数与位数
- [x] gif特点
- [x] 直方图概念
- [x] 像素平均中值
- [x] 累计直方图概念
- [x] 阈值操作
- [x] 点运算与直方图
- [x] 修正的自动对比度调整
- [x] 直方图均衡化
- [ ] 均衡化与规范化
- [x] 均衡化公式
- [x] 线性平滑
- [x] 线性滤波
- [x] 最大值与最小值滤波
- [x] 中值滤波
- [x] 加权中值滤波
- [x] 高斯滤波
- [x] 锐化线性滤波
- [x] 边缘检测算子
- [x] 一阶微分边缘检测算子
- [x] sobel算子
- [x] 复氏变换?
- [x] 膨胀
- [x] 腐蚀
- [x] 开运算
- [x] 闭运算
- [ ] 各种颜色表示的背景与应用
- [ ] 颜色模型
- [ ] 插值方式