## 2.1 通信基础
### 2.1.1 基本概念
#### 数据,信号,码元
数据是指传达信息的实体
信号是指数据的电气或电磁表现
码元是指一个用固定时长的信号波形表示一位k进制数
1码元可以携带多个比特的信息量

#### 信源,信道,与信宿

从通信双方信息的交互方式看,可分为三种基本方式:
1. 单工通信,只有一个方向上的通信,例如电视广播,一条信道
2. 半双工通信,通信双方都可发送或接收信息,但任何一方不能同时发送和接收,两条信道
3. 全双工通信,通信双方可以同时发送和接收信息,需要两条信道


#### 速率,波特与带宽
速率也称为数据率,指的是数据的传输速率,表示单位时间内传输的数据量.可用码元传输速率和信息传输速率表示
1. 码元传输速率
   1. 又称码元速率,波形速率,表示单位时间内传输的码元(脉冲信号等)个数,单位是波特(Band),波特率?
   2. 与进制数无关
2. 信息传输速率
   1. 又称信息速率,比特率等,表示单位时间内所传输的二进制码元个数(即比特数)
   2. 单位是 比特/秒

带宽原指信号具有的频带宽度,单位是赫兹(Hz)
也表示单位时间内网络中的最高数据率,此时单位是b/s


### 2.1.2 奈奎斯特定理与香农定理
#### 奈奎斯特定理
又称奈式准则,
它指出在理想低通(没有噪音,带宽有限)的信道中
**极限码元传输率**(波特率?)为2W波特,其中**W是理想低通信道的带宽**,单位为Hz
若用V表示每个码元离散电平的数目(指有多少种不同的码元,比如有16中不同码元,则要用4位二进制表示)
则**极限数据传输率**为 2Wlog₂V (单位b/s)

二进制信号V = 2

对于奈式准则,可以得出以下结论:
1. 码元传输的速率有上限
2. 信道频带越宽(通过的信号高频分量越多),就有更高的码元传输速率
3. 未对信息传输速率限制


#### 香农定理
带宽受限且有高斯白噪音声干扰的信道的极限数据传输率
当用此速率进行传输是,可以做到不产生误差,
信道的极限数据传输率 =  $Wlog_2(1+S/N)$ (单位是 b/s)  
W为信道带宽
S为信道所传信号的平均功率
N为信道内部的高斯噪声功率
S/N(数字形式) 为信噪的比即信号的平均功率与噪声的平均功率纸币
而特指的信噪比(分贝形式) = $10log_{10}(S/N)$ 单位为 dB,
例如当S/N = 10时,信噪比为 10dB,S/N=1000时,信噪比为30dB

对于香农定理可以得出以下结论:
1. 信噪比越大,信息的极限传输速率越高
2. 对一定的传输带宽和一定的信噪比,信息传输速率的上限是确定的
3. 只要信息的传输速率低于信道的极限传输速率,就能找到某种方法来实现无差错的传输
4. 香农定理得出的是极限信息传输速率,实际信道能达到的传输速率要比它低不少

#### end
两个公式取最小
出现信号类型,要考虑两个定理最小值

### 2.1.3 编码与调制
#### 数字数据编码为数字信号
##### 归零编码
高电平代表1,低电平代表0,或者相反
每隔时钟周期的中间均跳变到低点平,接收方根据该跳变调整本方的时钟基准

##### 非归零编码
与RZ 相比,不用归零,
所以无法传递时钟信号,双方难以同步,
最好双方有时钟线

##### 反向非归零编码
用信号的翻转代表0,信号保持不变代表1
既能传输时钟信号,又能尽量不损失系统带宽
USB 2.0 通信的编码方式

##### 曼彻斯特编码
(将一个码元分成两个相等的时间间隔)
前高后低表示 1, 0相反
每个码元中间出现电平跳变,位中间的跳变既作为时钟信号,又作为数据信号
但它所占的频带宽度是原始带宽度的两倍

10BaseT 

##### 差分曼彻斯特编码
常用于局域网传输
若码元为1,这前半个码元的电平与上一个码元的后半个电平相同
若码元为0,则情形相反
每隔码元中间都有一次电平跳转,可以实现自动同步,且抗干扰性较好



##### 4B/5B编码
将欲发送数据流的每4位作为一组,然后按照4B/5B编码规则将其转换为对应的5位码
5位码 的 16 种表示16中不同的4位码,其他16中表示控制码


#### 数字数据调制为模拟信号
##### 幅移键控(ASK)
改变载波信号的振幅(Amplitude)
比较容易实现,抗干扰能力差

##### 频移键控(FSK)
频率
比较容易实现,抗干扰能力差

##### 相移键控(PSK)
相位(Phase)
分为绝对调相与相对调相

##### 正交振幅调制(QAM)
在频率相同的前提下,将ASK 与 PSK 结合起来,新城叠加信号
设波特率为B,采用m个相位,每隔相位有n种振幅,则该QAM技术的数据传输率R为
$R = Blog_2(mn)$  单位为 b/s
也即
$R = 2Wlog_2(mn)$  单位为 b/s


#### 模拟数据编码为数字信号
采样,量化,编码

采样定理:
在通信领域,带宽是指信号最高频率与最低频率之差,单位为Hz.
假设原始信号中的最大频率为f,那么采样频率必须大于等于f的两倍
又称奈奎斯特定理
采样频率等于波特率.




#### 模拟数据调制为模拟信号
频分复用(FDM),充分利用带宽资源
电话机和本地局交换机 使用这种放好四


### 2.1.4 电路交换,报文交换,分组交换
#### 电路交换
在进行数据通信前,两个节点之间必须线建立一条专用(双方独占)的物理通信路径

优点:
1. 通信时延小
2. 有序传输
3. 没有冲突
4. 使用范围广
5. 实时性强

缺点:
1. 建立连接时间长,平均链接建立时间长
2. 线路独占
3. 灵活性差,出故障要重新连接
4. 难以规格化,不同中断很难相互通信,差错控制难

电路交换建立后,出源节点和目的节点外,电路中的其他节点都采用 直通方式 接受数据和发送数据 ,即不会存在储存转发所耗费的时间
#### 报文交换
数据交换的单位是报文(不分割传输数据),报文携有目的地址,源地址等信息
报文交换在交换节点采用的储存转发的传输方式

优点:
1. 无需建立连接
2. 动态分配路线
3. 提高线路可靠性
4. 提供多目标服务

缺点:
1. 会有转发时延
2. 报文交换对报文的大小没有限制,这要求网络节点需要有较大的缓存空间
现在较少使用,通常被分组交换替代

#### 分组交换
分组交换限制了每次传送的数据块大小的上限,把大的数据块分割成合理的小数据块
再加上一些必要的控制信息构成分组(Packet)

优点:
1. 无建立时延
2. 线路利用率高
3. 简化了存储管理(相对报文交换)
4. 加速传输,并发
5. 减少出错概率和重发数据量

缺点:
1. 存在传输时延,比报文交换少
2. 需要传输额外的信息量,每隔小数据块都要加上控制信息
3. 可能失序

#### end
传送数据量大且其传送时间远大于呼叫时间时采用电路交换较为合适
端到端的通路有多段链路组成时,次啊用分组交换合适
从提高整个网络的信道利用率来看,


### 2.1.5 数据报与虚电路
分组交换根据器通信子网向端点系统提供的服务,
还可进一步分为面向连接的虚电路方式和无连接的数据报方式
这两种服务都由网络层提供
要注意数据报方式和虚电路方式都是属于分组交换的
#### 数据报

原理:
1. 主机A将分组逐个发往与他直接链接的交换节点A,交换节点A缓存收到的分组
2. 交换节点A查找转发表转发分组
3. 最终到达主机B



特点:
1. 不需要先连接
2. 网络尽最大努力交付
3. 分组包括发送和接受端的完整地址
4. 存储转发时,要排队等候,有时延
5. 冗余路径
6. 时延小,提高了网络吞吐量
7. 资源利用率高


#### 虚电路
虚电路方式尝试将数据报方式与电路交换方式结合起来,充分发挥两种方法的有点
在分组发送之前,要求在发送方和接收方建立一条逻辑上相连的虚电路
并且连接一旦建立,就固定了虚电路所对应的物理路径
整个通信方式分为三个阶段: 虚电路简历,数据传输与虚电路释放

在虚电路方式中,端系统每次简历虚电路是,选一个为用过的虚电路号分配给该虚电路
以区别于本系统中其他虚电路
数据分组还要有虚电路号
虚电路中每各节点上都维持一张虚电路表

虚电路工作方式:
1. 主机A发送 呼叫请求 分组,若B同意链接 则发送 呼叫应答 分组予以确认
2. 虚电路建立后,主机A就可向主机B发送数据分组
3. 传送结束后主机A通过发送 释放请求 分组来拆除虚电路,逐段断开整个链接

特点:
1. 建立,拆除需要时间开销
2. 虚电路的路由选择体现在连接建立阶段,连接建立后,就确定了传输路径
3. 提供可靠的通信功能
4. 弱点也是对故障敏感
5. 分组首部并不是目的地址,而是虚电路表示符,相对数据报方式开销小
#### end
比较
转发时间?


## 2.2 传输介质
### 2.2.1 双绞线,同轴电缆,光纤,无线传输介质
#### 双绞线
绞合可以减少对相邻导线的电磁干扰
屏蔽双绞线(STP)
非屏蔽双绞线(UTP)
几千米到数十千米

#### 同轴电缆
50Ω同轴电缆 传输基带数字信号,又称基带同轴电缆,在局域网中应用广泛
75Ω同轴电缆主要传送宽带信号,又称宽带同轴电缆,主要用于有线电视系统
良好的抗干扰特性,广范用于传输较高速率的数据,传输距离更远

#### 光纤
全反射
多模光纤: 从不同角度的多束光线可在一条光纤中传输,只适合近距离传输

光纤的直径减小到仅一个广波长度时,光纤就像一根波导那样,可使光线一直向前传播,而不会造成多次反射,这样的光纤就是单模光纤,衰减较小,适合远距离传输



#### 无线传播介质
##### 无线电波
WLAN 
向所有方向散播

##### 微波,红外线,激光
发送方和接收方在一条视线通路,有很强的方向性,都沿直线传播

微波通信频率较高,频段范围也很宽,载波频率通常为2~40GHz

卫星通信(转发微波信号)的优点是通信容量大,距离远,覆盖广,缺点是时延长,一般250~270ms


### 2.2.2 物理层接口的特性
尽可能频比各种物理设备的差异

1. 机械特性,接口,引脚
2. 电气特性,传输二进制位时,线路电气状态,数据
3. 功能特性,信号意义
4. 规程(过程)特性,工作规程和时序关系



## 2.3 物理层设备
### 2.3.1 中继器
又称转发器,主要功能是将信号整形并放大再转发出去
使用中继器的几个网段认识一个局域网

中继器只能在规定范围内进行有效的工作
5-4-3 规则: 用4个中继器串联的5段通信介质中只有3段可以挂接计算机




> 放大器放大模拟信号
### 2.3.2 集线器
Hub 多端口的中继器
Hub 将端口接受到的信息,再生,转发到其他所有处于工作状态的端口
如果同时有多个端口输入,则发生冲突,导致这些数据都无效
不具备信号的定向传送能力



所有集线器的端口都属于一个冲突域,

带宽为10Mb/s的集线器上连接了8台计算机,当这8台计算机同时工作时,每台计算机所真正拥有的带宽为 10/8Mb/s

## 2.4 本章小结及疑难点

## tmp
基带传输: 数字信号,不经过调制就可直接传输
频带传输: 模拟信号 ,需要转换
宽带传输: 借助频带传输,将链路容量分成两个或多个信道,每隔信道可以携带不同信号



波特率表示信号每秒变化的次数
每位数据都要两个电平(两个脉冲信号,对应码元传输速率),因此波特率是数据率的两倍