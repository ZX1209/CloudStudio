## 6.1 网络应用模型

### 6.1.1 客户/服务器模型
工作流程
1. 服务器处于接收请求的状态
2. 客户机发出服务请求,并等待接收结果
3. 服务器收到请求后,分析请求,进行必要的处理,得到结果并发送给客户机




### 6.1.2 P2P模型
优点
1. 减轻了服务器的计算压力,消除了对某个服务器的完全依赖
2. 多个客户机之间可以直接共享文档
3. 可扩展性好
4. 网络健壮性强






## 6.2 域名系统(DNS)
采用 客户服务器模型 运行在UDP之上,使用53号端口



### 6.2.1 层次域名空间
域名中的标号
1. 标号中英文不区分大小写
2. 标号中出连字符(-)外不能使用其他标点符号
3. 每个标号不超过 63 个字符,多标号组成的完整域名最长不超过255个字符
4. 级别最低的域名写在最左边,级别最高的域名写在最右边

顶级域名分成如下三类
1. 国家顶级域名(nTLD)
   1. .cn 表示中国, .us表示美国,.uk 表示英国
2. 通用顶级域名(gTLD)
   1. .com 公司, .net 网络服务机构, .org 非营利性组织,美.gov 国家或政府部门
3. 基础结构域名
   1. arpa 用于反向域名解析,又称反向域名




### 6.2.2 域名服务器
联机分布式的数据库系统,采用 客户服务器模型

一个服务器所管辖的范围称为 区
一个区中节点必须能够连通,每个区设置相应的权限域名服务器
用来保存该区的所有主机的域名到IP的映射.每个域名服务器不但能够进行一些域名到IP的服务,还必须具有向连向其他域名服务器的信息


#### 根域名服务器
最高层次的域名服务器,知道所有顶级域名服务器的IP地址

因特网上有13个根域名服务器,

根域名服务器 用来管辖顶级域,通常并不直接吧代查询的域名直接转换成IP地址,
而是告诉本地域名服务器下一步因当找那个顶级域名服务器进行查询


#### 顶级域名服务器
负责管理在该顶级域名服务器组侧的所有二级域名

收到DNS查询请求时,就给出相应的回答(可能是最后的结果,也可能是下一步应当查找的域名服务器的IP地址)

#### 授权域名服务器(权限域名服务器)
每台主机都必须在授权域名服务器处等级
一台主机最好有两个授权域名服务器
能将其管辖的主机名转换为该主机的IP地址




#### 本地域名服务器


### 6.2.3 域名解析过程
正向解析,反向解析
nslookup,dig,host

递归查询和递归和迭代相结合的查询

#### 主机向本地域名服务器的查询采用递归查询
如果本地主机所访问的本地域名服务器不知道被查询域名的ip地址,
那么本地域名服务器就以DNS客户的身份,向根域名服务器继续发出查询请求报文

递归进行,最后本地域名服务器把查询结果告诉主机


#### 本地域名服务器向根域名服务器的查询采用迭代查询
当根域名服务器收到本地域名服务器发出的迭代查询请求报文
要么给出所要查询到IP地址,要么告诉本地域名服务器 下一步,
然后让本地域名服务器向这个顶级域名服务器进行后续的查询

为了提高DNS的查询效率,在域名服务器中广泛地使用了高速缓存

DNS服务器将在一段时间后丢弃高速缓存中的信息




## 6.3 文件传输协议(FTP)

### 6.3.1 FTP的工作原理
提供以下功能:
1. 提供不同种类主机系统之间的文件传输能力
2. 以用户权限管理的方式提供用户对远程FTP服务器上的文件管理功能
3. 以匿名FTP的方式提供公用文件共享的能力

FTP 采用客户服务器的工作方式,使用TCP可靠传输

FTP的服务器进程由两大部分组成:
一个主进程,负责接收新的请求
若干从属进程,负责处理单个请求

工作步骤如下:
1. 打开熟知端口21(控制端口),是客户进程能够连接上
2. 等待客户进程发连接请求
3. 启动丛属进程来吹来客户进程发来的请求.主从并发执行
4. 回到等待状态



### 6.3.2 控制连接与数据连接
#### 控制连接
服务器监听 21 号端口,等待客户连接
控制信息以7位ASCII格式传送

#### 数据连接
服务器的控制进程在收到FTP客户发来的文件传输请求后,就创建数据传送进程和数据连接
数据连接用来连接客户端和服务器端的数据传送进程,
数据传送进程,实际完成文件的传送,在传送完毕后关闭 数据传送连接 并结束运行

因为FTP使用了一个分离的控制连接,所以也称FTP的控制信息是外带(Out of band)传送的
使用FTP时,若要修改服务器上的文件,需要先将此文件传送到本地主机
然后再将修改后的文件副本传送到原服务器

网络文件系统(NFS)允许进程打开一个远程文件,并在该文件的某个特定位置开始读写数据
这样NFS可使用户赋值一个大文件中的一个很小的片段,而不需要复制整个大文件

常用 20 号端口...


## 6.4 电子邮件
### 6.4.1 电子邮件系统的组成结构
一个电子邮件有三个主要的组成构件: 用户代理(User Agent),用剑服务器 和电子邮件使用的协议(SMTP,POP3,IMAP)
用户代理(UA): 用户与电子邮件系统的接口,
邮件服务器: 组成电子邮件的和性,功能是发送和接受邮件,同时还要项发信人报告邮件传送情况
邮件发送协议和读取协议: SMTP(推),POP3(拉)



### 6.4.2 电子邮件格式与MIME
#### 电子邮件格式
一个电子邮件分为信封和内容两大部分,邮件内容又分为首部和主题两部分

RFC 822 规定了电子邮件的首部格式,
用户写好首部后,邮件系统自动地将信封所需的信息提取出来并卸载信封上,用户不需要亲自填写信封上的信息

邮件内容的首部包含一些首部行,每个首部行有一个关键字后跟冒号再后跟值组成,
最重要的关键字是To:和Subject:

To 是必须的关键字,后面填入一个或多个收件人的电子邮件
电子邮件地址的规定格式为 收件人邮件名@邮件所在主机的域名,


#### 多用途网际邮件扩充(MIME)
定义了传送非ASCII码的编码规则

主要包含三部分内容
1. 5个新的邮件首部字段
2. 定义了许多邮件内容的格式
3. 定义了传送编码,可对任何内容格式进行转换,而不会被邮件系统改变




### 6.4.3 SMTP和POP3
#### SMTP
simple mail transfer protocol

SMTP用TCP俩解,端口号为25 ,有以下三个阶段
1. 连接建立
   1. 不使用中间邮件服务器
   2. HELO 命令,并附上主机名
2. 邮件传送
   1. 250 OK,550 no such user here
   2. 发送 RCPT (收件人recipient的缩写)
   3. DATA命令,表示要开始传输邮件内容
   4. 354 start mail input;end with < CRLF >.< CRLF >
3. 连接释放
   1. QUIT
   2. 221 服务关闭



#### POP3 
post office protocol
TCP,端口号 110

因特网存取协议 IMAP 

用户游览器与邮件服务器之间用HTTP,不同邮件服务器之间用SMTP




## 6.5 万维网(WWW)
world wide web
统一资源定位符


### 6.5.1 WWW的概念与组成结构

### 6.5.2 超文本传输协议
#### HTTP的操作工程
默认端口80

#### HTTP的特点
武装台
Cookie,存储在用户主机中的文本文件,还有一串 识别码 用与服务识别用户
Webfuguing根据Cookie就定位该用户信息

HTTP本身无连接

* 持久连接(HTTP/1.1支持)
  * 非流水线,收到前一个响应后才能发出下一个请求
  * 流水线(默认),连续发出请求

#### HTTP的报文结构
面向文本的

请求报文
响应报文

区别是开始行不同

常用应用层协议小结
| 应用程序   | FTP数据连接 | FTP控制连接 | TELNET |
| ---------- | ----------- | ----------- | ------ |
| 使用协议   | TCP         | TCP         | TCP    |
| 熟知端口号 | 20          | 21          | 23     |

| 应用程序   | SMTP | DNS | TFTP | HTTP | POP3 | SNMP |
| ---------- | ---- | --- | ---- | ---- | ---- | ---- |
| 使用协议   | TCP  | UDP | UDP  | TCP  | TCP  | UDP  |
| 熟知端口号 | 25   | 53  | 69   | 80   | 110  | 161  |


## 6.6 本章小结及疑难点
互联网反之多个计算机网按一定通信协议相互连接而称的一个大型计算机网络
因特网 指在ARPA网基础上发展而来的世界上最大的全球性互连网络
属于互连网

万维网,无数个网络站点和也幂拿的几何

